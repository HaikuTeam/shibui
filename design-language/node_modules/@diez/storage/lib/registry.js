"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("fs-extra"),i=require("os"),s=require("path"),a=s.join(i.homedir(),".diez"),e=s.join(a,"registry.json"),n=()=>t.mkdirp(a),c=async()=>(await n(),await t.pathExists(e)||await t.writeJson(e,{}),await t.readJson(e,{throws:!1})||{}),r=async i=>(await n(),t.writeJson(e,i,{spaces:2}));class o{constructor(){this.configuration={}}async flush(){r(this.configuration)}get(t){return this.configuration[t]}async set(t){Object.assign(this.configuration,t),await this.flush()}async delete(t){delete this.configuration[t],await this.flush()}static async initialize(){o.instance||(o.instance=new o,o.instance.configuration=await c())}static async get(t){return await this.initialize(),this.instance.get(t)}static async set(t){await this.initialize(),await this.instance.set(t)}static async delete(t){await this.initialize(),await this.instance.delete(t)}static reset(){this.instance=void 0}}exports.Registry=o;
//# sourceMappingURL=/@diez/storage/lib/registry.js.map