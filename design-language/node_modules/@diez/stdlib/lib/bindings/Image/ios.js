"use strict";const e=require("@diez/targets"),s=require("path"),n=require("../../utils"),t=s.join(n.sourcesPath,"ios","examples","Image"),i=e=>({version:1,author:e}),a=(e,s)=>({filename:e,scale:s,idiom:"universal"}),o=(e,n)=>{if(e.has("Images.xcassets"))return;const t=(e=>({info:i(e)}))(n),a=JSON.stringify(t,null,2);e.set(s.join("Images.xcassets","Contents.json"),{contents:a})},r=(e,n,t)=>{const a=e.split("/");if(0===a.length)return;const o=(e=>({info:i(e),properties:{"provides-namespace":!0}}))(t),r=JSON.stringify(o,null,2);let c="Images.xcassets";for(const e of a){c=s.join(c,e);const t=s.join(c,"Contents.json");n.has(t)||n.set(t,{contents:r})}},c=(e,n,t,o)=>{const r=s.join(e,"Contents.json"),c=((e,s,n,t)=>({info:i(e),images:[a(s,"1x"),a(n,"2x"),a(t,"3x")]}))(o,s.basename(n.file.src),s.basename(n.file2x.src),s.basename(n.file3x.src)),l=JSON.stringify(c,null,2);t.set(r,{contents:l})},l=async(e,n,t,i)=>{const a=s.basename(e.src),o=s.join(n,a);i.set(o,{contents:s.join(t,e.src),copy:!0})},m={sources:[s.join(n.sourcesPath,"ios","bindings","Image+Binding.swift")],assetsBinder:async(e,{projectRoot:n,hot:t},{assetBindings:i,bundleIdPrefix:a})=>{if(t)return;i.delete(e.file.src),i.delete(e.file2x.src),i.delete(e.file3x.src);const m=`${a}.Static`;await Promise.all([o(i,m),r(s.dirname(e.file.src),i,m),(async(e,n,t,i)=>{const a=s.parse(e.file.src),o=s.join("Images.xcassets",a.dir,`${a.name}.imageset`);return Promise.all([l(e.file,o,n,t),l(e.file2x,o,n,t),l(e.file3x,o,n,t),c(o,e,t,i)])})(e,n,i,m)])},examples:[{example:"UIImage",snippets:[{lang:e.IosLanguages.Swift,templatePath:s.join(t,"UIImage.swift.handlebars")},{lang:e.IosLanguages.ObjectiveC,templatePath:s.join(t,"UIImage.objc.handlebars")}]}]};module.exports=m;
//# sourceMappingURL=/@diez/stdlib/lib/bindings/Image/ios.js.map