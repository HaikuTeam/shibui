"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("http"),t=e(require("server-destroy")),o=require("./utils"),s=async(e,r)=>new Promise(t=>{try{e.listen(r,"0.0.0.0"),e.once("listening",()=>{e.once("close",()=>{t(!0)}),e.close()}),e.on("error",()=>{t(!1)})}catch(e){t(!1)}});exports.getCandidatePortRange=((e,r)=>Array.from(Array(r).keys()).map(r=>r+e)),exports.findOpenPort=(async e=>{const o=r.createServer();t.default(o);for(const r of e)if(await s(o,r))return o.destroy(),r;throw o.destroy(),new Error("Unable to find open port.")}),exports.socketTrap=(e=>{e.once("disconnect",()=>{e.destroy(),e.removeAllListeners()}),e.on("error",r=>{e.destroy(),e.removeAllListeners()}),o.exitTrap(()=>{e.destroy()})});
//# sourceMappingURL=/@diez/cli-core/lib/network.js.map