"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const r=require("@diez/cli-core"),o=new Set;exports.performExtraction=(async(t,e)=>{const a=[],i=await(async t=>{if(!o.size)for(const[t,{providers:e}]of await r.findPlugins())if(e&&e.extractors)for(const a of e.extractors)o.add(r.cliRequire(t,a));for(const r of o)if(await r.canParse(t))return r;throw new Error(`Unable to find appropriate extractor for ${t}.`)})(t.source);i.configure&&await i.configure(a);try{const o=i.create(...a);await o.export(t,e,{progress:r.Log.info,error:r.Log.warning})}catch(r){if(!i.shouldRetryError||!await i.shouldRetryError(r))throw r;await exports.performExtraction(t,e)}});
//# sourceMappingURL=/@diez/extractors-core/lib/utils.js.map