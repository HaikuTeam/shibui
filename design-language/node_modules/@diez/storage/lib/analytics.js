"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const t=e(require("node-fetch")),r=require("os"),s=require("uuid"),i=require("./registry");exports.getCommandArguments=(()=>process.argv.slice(2).join(" "));exports.enableAnalytics=(()=>i.Registry.set({analyticsEnabled:!0,uuid:s.v4()})),exports.disableAnalytics=(()=>Promise.all([i.Registry.set({analyticsEnabled:!1}),i.Registry.delete("uuid")])),exports.emitDiagnostics=(async(e,s,a)=>t.default("https://analytics.diez.org/ping",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(await(async(e,t,s)=>{const[a,n]=await Promise.all([i.Registry.get("uuid"),i.Registry.get("analyticsEnabled")]);if(!n||!a)throw new Error("Analytics are disabled.");return{eventType:e,uuid:a,properties:{diezVersion:t,commandArguments:exports.getCommandArguments(),platform:r.platform(),arch:r.arch(),nodeVersion:process.version,...s}}})(e,s,a))}));
//# sourceMappingURL=/@diez/storage/lib/analytics.js.map