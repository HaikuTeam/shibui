"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("@diez/cli-core"),r=require("fs-extra"),a=require("fs-walk"),t=require("os"),s=require("path"),i=require("pngjs"),o=require("uuid"),n=require("./api"),p=/"data:image\/(png|jpe?g|gif);base64,(.*?)"/gi;exports.chunk=((e,r)=>{const a=e.slice(0),t=[];for(;a.length;)t.push(a.splice(0,r));return t}),exports.createFolders=(async(e,a)=>(await r.emptyDir(e),Promise.all(Array.from(a).map(a=>r.mkdirp(s.join(e,a)))))),exports.escapeShell=(e=>e.replace(/(["\s'$`\\])/g,"\\$1")),exports.adjustImageGamma=((e,r)=>{if(r===n.ImageFormats.png&&"string"==typeof e&&e.length)try{const r=Buffer.from(e,"base64"),a=i.PNG.sync.read(r);return a.gamma=1/2.2,i.PNG.adjustGamma(a),i.PNG.sync.write(a).toString("base64")}catch(r){return e}return e}),exports.generateRandomFilePath=((e="")=>{const r=`${o.v4()}.${e}`;return s.join(t.tmpdir(),r)}),exports.fixGammaOfSVGs=(e=>{a.walkSync(e,async(e,a,t)=>{if(!t.isFile()||s.extname(a)!==`.${n.ImageFormats.svg}`)return;const i=s.join(e,a),o=(await r.readFile(i)).toString().replace(p,(e,r,a)=>e.replace(a,exports.adjustImageGamma(a,r)));await r.writeFile(i,o)})}),exports.cliReporters={progress:e.Log.info,error:e.Log.warning};
//# sourceMappingURL=/@diez/extractors/lib/utils.js.map